<!doctype html>
<html lang="en" class="h-full scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Plant-based Edinburgh</title>
  <meta name="description" content="Tell Edinburgh Council to go plant-based. Email your local councillors in 1 minute to support switching all council catering to 100% plant-based food.">
  
  <!-- Open Graph meta tags for social media sharing -->
  <meta property="og:title" content="Plant-based Edinburgh - Tell Council to Go Plant-Based">
  <meta property="og:description" content="Tell Edinburgh Council to go plant-based. Email your local councillors in 1 minute to support switching all council catering to 100% plant-based food.">
  <meta property="og:image" content="https://plantbased-edinburgh.netlify.app/preview-image.png">
  <meta property="og:url" content="https://plantbased-edinburgh.netlify.app">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Plant-based Edinburgh">
  
  <!-- Twitter Card meta tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Plant-based Edinburgh - Tell Council to Go Plant-Based">
  <meta name="twitter:description" content="Tell Edinburgh Council to go plant-based. Email your local councillors in 1 minute to support switching all council catering to 100% plant-based food.">
  <meta name="twitter:image" content="https://plantbased-edinburgh.netlify.app/preview-image.png">
  
  <link rel="stylesheet" href="./styles.css">
</head>
<body class="bg-gradient-to-b from-slate-50 to-slate-100 text-lg md:text-xl leading-relaxed">
  <main class="w-full max-w-2xl mx-auto space-y-12 px-4">
    <section class="max-w-3xl mx-auto pt-24 px-4 text-center prose prose-lg">
      <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6">
        Tell Edinburgh Council to go <span class="text-emerald-600">plant-based</span>
      </h1>
    </section>
    <!-- Email generation form -->
    <section class="w-full max-w-md md:max-w-xl mx-auto bg-white rounded-xl shadow-lg p-6 space-y-4 text-lg md:text-xl">
      <h2 class="text-xl font-semibold text-center">Email your local councillors in 1 minute</h2>
     <p class="text-center text-sm md:text-base text-gray-700">
        Edinburgh Council is considering a motion to switch all catering for meetings and internal events to 100% plant-based food as proposed in our <a href="https://www.edinburgh.gov.uk/directory-record/1745676/edinburgh-council-commitment-to-100-plant-based-food-for-internal-catering-of-meetings-and-events" target="_blank" rel="noopener" class="text-emerald-600 hover:underline">
          open petition
        </a>. This would be a huge step towards reducing the council's carbon footprint and promoting sustainable food choices.
      </p>
      <p class="text-center text-sm md:text-base text-gray-700">
        Learn more and join the campaign at 
        <a href="https://www.plantbasedcouncils.org" target="_blank" rel="noopener" class="text-emerald-600 hover:underline">
          plantbasedcouncils.org
        </a>.
      </p>
      <p class="text-center text-sm md:text-base text-gray-700 flex items-center justify-center space-x-1">
        <span>Follow us on Instagram at</span>
        <a href="https://www.instagram.com/plantbased.edinburgh" target="_blank" rel="noopener" class="text-emerald-600 hover:underline flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.332 3.608 1.308.975.975 1.246 2.242 1.308 3.608.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.332 2.633-1.308 3.608-.975.975-2.242 1.246-3.608 1.308-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.332-3.608-1.308-.975-.975-1.246-2.242-1.308-3.608-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.062-1.366.332-2.633 1.308-3.608.975-.975 2.242-1.246 3.608-1.308 1.266-.058 1.646-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-1.281.058-2.563.334-3.535 1.306-.972.972-1.248 2.254-1.306 3.535-.058 1.28-.072 1.688-.072 4.947s.014 3.667.072 4.947c.058 1.281.334 2.563 1.306 3.535.972.972 2.254 1.248 3.535 1.306 1.28.058 1.688.072 4.947.072s3.667-.014 4.947-.072c1.281-.058 2.563-.334 3.535-1.306.972-.972 1.248-2.254 1.306-3.535.058-1.28.072-1.688.072-4.947s-.014-3.667-.072-4.947c-.058-1.281-.334-2.563-1.306-3.535-.972-.972-2.254-1.248-3.535-1.306-1.28-.058-1.688-.072-4.947-.072zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.324c-2.296 0-4.162-1.866-4.162-4.162s1.866-4.162 4.162-4.162 4.162 1.866 4.162 4.162-1.866 4.162-4.162 4.162zm6.406-11.845c-.796 0-1.441.645-1.441 1.441s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.441-1.441-1.441z"/>
          </svg>
          @plantbased.edinburgh
        </a>
      </p>
      <form id="email-form" class="space-y-4" novalidate>
        <!-- optional‐fields notice -->
        <p class="text-sm md:text-base text-gray-700 italic">
          All fields are optional and will prepopulate your email. We don’t store any of your details or send emails automatically.
        </p>
        <div>
          <label for="full-name" class="block text-base md:text-lg font-medium text-gray-700">Full Name</label>
          <input
            type="text"
            id="full-name"
            name="full-name"
            aria-describedby="full-name-helper full-name-error"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg"
            required
          >
          <p id="full-name-helper" class="text-xs md:text-sm text-gray-600 mt-1">
            Shown in the signature so your councillor knows who it’s from.
          </p>
          <p id="full-name-error" class="text-xs md:text-sm text-red-600 mt-1 hidden" role="alert"></p>
        </div>
        <div>
          <label for="address" class="block text-base md:text-lg font-medium text-gray-700">Address</label>
          <input
            type="text"
            id="address"
            name="address"
            aria-describedby="address-helper address-error"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg"
            required
          >
          <p id="address-helper" class="text-xs md:text-sm text-gray-600 mt-1">
            House number + street + postcode — helps confirm you live in their ward.
          </p>
          <p id="address-error" class="text-xs md:text-sm text-red-600 mt-1 hidden" role="alert"></p>
        </div>
        <div>
          <label for="ward-select" class="block text-base md:text-lg font-medium text-gray-700">
            Select Your Ward
          </label>
          <p id="ward-helper" class="text-xs md:text-sm text-gray-600 mt-1">
            We will find your councillors for you.
          </p>
          <div class="flex justify-center mt-2">
            <a
              href="https://boundaries.scot/"
              target="_blank"
              rel="noopener"
              class="inline-flex items-center px-6 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 font-medium shadow-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
            >
              Find your ward
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 ml-2 -mr-1"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                role="img"
                aria-labelledby="extLinkTitle"
              >
                <title id="extLinkTitle">Opens in new tab</title>
                <path d="M14 3h7v7M21 3l-8 8" />
                <rect x="3" y="8" width="13" height="13" rx="2" ry="2" />
              </svg>
            </a>
          </div>
          <select id="ward-select" name="ward" class="mt-4 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg">
            <option value="" disabled selected>Choose a ward…</option>
            <!-- JS will populate options -->
          </select>
        </div>
        <div>
          <label for="personal-message" class="block text-base md:text-lg font-medium text-gray-700">Personalised Message</label>
          <textarea
            id="personal-message"
            name="personal-message"
            rows="4"
            aria-describedby="personal-message-helper personal-message-error"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg"
            required
          ></textarea>
          <p id="personal-message-helper" class="text-xs md:text-sm text-gray-600 mt-1 mb-1">
            Introduce yourself as a constituent and ask that they act on our open petition and switch to 100% plantbased catering for meetings and internal events. Then, explain why this issue matters to you. We’ll add a polite greeting and closing automatically. This will be the first paragraph.
          </p>
          <p id="personal-message-example" class="text-xs md:text-sm text-gray-600 mb-2">
            <!-- will be replaced at runtime with your mailto_config opening_paragraph -->
            Example: “I am writing to you as one of your constituents to ask you to support a campaign 
            to switch council catering for meetings and internal events to 100% plant based food.”
          </p>
          <p id="personal-message-error" class="text-xs md:text-sm text-red-600 mt-1 hidden" role="alert"></p>
        </div>
        <div>
          <label class="inline-flex items-center space-x-2">
            <input
              type="checkbox"
              id="include-default-paras"
              checked
              class="h-4 w-4 text-emerald-600 border-gray-300 rounded"
            >
            <span class="text-sm text-gray-700">Include our email template</span>
          </label>
        </div>

        <!-- honeypot to trap bots -->
        <input type="text" name="hp" id="hp" autocomplete="off" tabindex="-1" class="hidden">

        <!-- per-councillor email queue -->
        <div id="email-queue" class="space-y-2 mt-4 hidden">
          <p id="email-progress" class="text-sm text-gray-700"></p>
          <div id="email-buttons" class="space-y-2"></div>
        </div>
      </form>
    </section>
    <!-- Chat container -->
    <section id="chat-wrapper" hidden>
      <div id="chat-container"
           class="w-full max-w-md md:max-w-xl mx-auto bg-white rounded-xl shadow-xl p-6 space-y-4 text-lg md:text-xl">
        <h2 class="text-lg font-medium mb-2">Need help personalising your message?</h2>
        <div id="chat-window" class="flex flex-col items-start gap-4 h-80 overflow-y-auto p-4 bg-gray-50 rounded-md shadow-inner">
          <!-- Messages will appear here -->
        </div>
        <form id="chat-form" class="flex items-center space-x-2">
          <input
            id="chat-input"
            type="text"
            maxlength="1000"
            placeholder="Type your message..."
            class="flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
            required
          />
          <p id="chat-error" class="text-xs text-red-600 mt-1 hidden">
            Input too long; maximum 1000 characters allowed.
          </p>
          <button
            type="submit"
            class="px-6 py-3 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 shadow-md disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Send
          </button>
        </form>
      </div>
    </section>
  </main>
  <script type="module" src="./mailto.js"></script>
  <script type="module" src="./main.js"></script>
</body>
</html>
